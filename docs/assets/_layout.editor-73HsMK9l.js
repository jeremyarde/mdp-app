import{j as r,r as h,b as L}from"./index-ComE9oT0.js";import{c as V,h as w,B as M,j as z}from"./index-COx_UjwN.js";import{p as B,L as W,C as q,I as D,g as k,t as C}from"./label-C54o-3F-.js";import{S as U}from"./separator-DCYIg2T1.js";const H=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],J=V("save",H);function O({className:e,...t}){return r.jsx("textarea",{"data-slot":"textarea",className:w("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}function P({formtext:e,setFormtext:t}){const[n,o]=h.useState(!1),i=c=>{t(c.target.value)},d=async()=>{o(!0);try{await B("/forms",{content:e,title:e.split(`
`)[0]||"Untitled Form"}),console.log("Form saved successfully!")}catch(c){console.error("Failed to save form:",c)}finally{o(!1)}};return r.jsx("div",{className:"flex flex-1 flex-col",children:r.jsx("div",{className:"@container/main flex flex-1 flex-col gap-2",children:r.jsxs("div",{className:"flex flex-col gap-4 py-4 md:gap-6 md:py-6",children:[r.jsx("div",{className:"grid w-full gap-3",children:r.jsx(O,{placeholder:"Type your message here.",id:"message-2",value:e,onChange:i})}),r.jsxs(M,{variant:"outline",onClick:d,disabled:n,children:[r.jsx(J,{className:"size-4"}),n?"Saving...":"Save"]})]})})})}function G({className:e,...t}){return r.jsx("fieldset",{"data-slot":"field-set",className:w("flex flex-col gap-6","has-[>[data-slot=checkbox-group]]:gap-3 has-[>[data-slot=radio-group]]:gap-3",e),...t})}function K({className:e,variant:t="legend",...n}){return r.jsx("legend",{"data-slot":"field-legend","data-variant":t,className:w("mb-3 font-medium","data-[variant=legend]:text-base","data-[variant=label]:text-sm",e),...n})}function E({className:e,...t}){return r.jsx("div",{"data-slot":"field-group",className:w("group/field-group @container/field-group flex w-full flex-col gap-7 data-[slot=checkbox-group]:gap-3 [&>[data-slot=field-group]]:gap-4",e),...t})}const Q=z("group/field flex w-full gap-3 data-[invalid=true]:text-destructive",{variants:{orientation:{vertical:["flex-col [&>*]:w-full [&>.sr-only]:w-auto"],horizontal:["flex-row items-center","[&>[data-slot=field-label]]:flex-auto","has-[>[data-slot=field-content]]:items-start has-[>[data-slot=field-content]]:[&>[role=checkbox],[role=radio]]:mt-px"],responsive:["flex-col [&>*]:w-full [&>.sr-only]:w-auto @md/field-group:flex-row @md/field-group:items-center @md/field-group:[&>*]:w-auto","@md/field-group:[&>[data-slot=field-label]]:flex-auto","@md/field-group:has-[>[data-slot=field-content]]:items-start @md/field-group:has-[>[data-slot=field-content]]:[&>[role=checkbox],[role=radio]]:mt-px"]}},defaultVariants:{orientation:"vertical"}});function b({className:e,orientation:t="vertical",...n}){return r.jsx("div",{role:"group","data-slot":"field","data-orientation":t,className:w(Q({orientation:t}),e),...n})}function g({className:e,...t}){return r.jsx(W,{"data-slot":"field-label",className:w("group/field-label peer/field-label flex w-fit gap-2 leading-snug group-data-[disabled=true]/field:opacity-50","has-[>[data-slot=field]]:w-full has-[>[data-slot=field]]:flex-col has-[>[data-slot=field]]:rounded-md has-[>[data-slot=field]]:border [&>*]:data-[slot=field]:p-4","has-data-[state=checked]:bg-primary/5 has-data-[state=checked]:border-primary dark:has-data-[state=checked]:bg-primary/10",e),...t})}function X(e){switch(e.block_type){case"Title":return r.jsx(G,{children:r.jsx(K,{children:e.properties.title})},e.id);case"TextInput":return r.jsxs(b,{children:[r.jsx(g,{htmlFor:e.properties.id,children:e.properties.question}),r.jsx(D,{id:e.properties.id,name:e.properties.id,placeholder:e.properties.default||"",defaultValue:e.properties.default||""})]},e.id);case"Textarea":return r.jsxs(b,{children:[r.jsx(g,{htmlFor:e.properties.id,children:e.properties.question}),r.jsx(O,{id:e.properties.id,name:e.properties.id,placeholder:e.properties.default||"",defaultValue:e.properties.default||"",className:"resize-none"})]},e.id);case"Checkbox":return r.jsxs(b,{children:[r.jsx(g,{children:e.properties.question}),r.jsx(E,{children:e.properties.options.map(t=>r.jsxs(b,{orientation:"horizontal",children:[r.jsx(q,{id:t.id,name:e.properties.id,value:t.id,defaultChecked:t.checked}),r.jsx(g,{htmlFor:t.id,className:"font-normal cursor-pointer",children:t.text})]},t.id))})]},e.id);case"Radio":return r.jsxs(b,{children:[r.jsx(g,{children:e.properties.question}),r.jsx(E,{children:e.properties.options.map((t,n)=>{const o=`${e.id}-${n}`;return r.jsxs(b,{orientation:"horizontal",children:[r.jsx("input",{type:"radio",id:o,name:e.properties.id,value:t,className:"h-4 w-4 border-input text-primary focus:ring-primary focus:ring-offset-0 cursor-pointer"}),r.jsx(g,{htmlFor:o,className:"font-normal cursor-pointer",children:t})]},o)})})]},e.id);case"Submit":return r.jsx(b,{orientation:"horizontal",children:r.jsx(M,{type:"submit",children:e.properties.label||"Submit"})},e.id);default:return null}}function Y({survey:e}){return e?r.jsx("div",{className:"w-full md:max-w-md",children:r.jsx("form",{children:r.jsx(E,{children:e.blocks.map(t=>X(t))})})}):r.jsx("div",{children:"No survey found"})}const Z="/assets/markdownparser_bg-BabnrIn0.wasm",ee=async(e={},t)=>{let n;if(t.startsWith("data:")){const o=t.replace(/^data:.*?base64,/,"");let i;if(typeof Buffer=="function"&&typeof Buffer.from=="function")i=Buffer.from(o,"base64");else if(typeof atob=="function"){const d=atob(o);i=new Uint8Array(d.length);for(let c=0;c<d.length;c++)i[c]=d.charCodeAt(c)}else throw new Error("Cannot decode base64-encoded data URL");n=await WebAssembly.instantiate(i,e)}else{const o=await fetch(t),i=o.headers.get("Content-Type")||"";if("instantiateStreaming"in WebAssembly&&i.startsWith("application/wasm"))n=await WebAssembly.instantiateStreaming(o,e);else{const d=await o.arrayBuffer();n=await WebAssembly.instantiate(d,e)}}return n.instance.exports};let l;function te(e){l=e}const f=new Array(128).fill(void 0);f.push(void 0,null,!0,!1);function a(e){return f[e]}let x=f.length;function ne(e){e<132||(f[e]=x,x=e)}function m(e){const t=a(e);return ne(e),t}const re=typeof TextDecoder>"u"?(0,module.require)("util").TextDecoder:TextDecoder;let R=new re("utf-8",{ignoreBOM:!0,fatal:!0});R.decode();let j=null;function S(){return(j===null||j.byteLength===0)&&(j=new Uint8Array(l.memory.buffer)),j}function F(e,t){return e=e>>>0,R.decode(S().subarray(e,e+t))}function s(e){x===f.length&&f.push(f.length+1);const t=x;return x=f[t],f[t]=e,t}function A(e){const t=typeof e;if(t=="number"||t=="boolean"||e==null)return`${e}`;if(t=="string")return`"${e}"`;if(t=="symbol"){const i=e.description;return i==null?"Symbol":`Symbol(${i})`}if(t=="function"){const i=e.name;return typeof i=="string"&&i.length>0?`Function(${i})`:"Function"}if(Array.isArray(e)){const i=e.length;let d="[";i>0&&(d+=A(e[0]));for(let c=1;c<i;c++)d+=", "+A(e[c]);return d+="]",d}const n=/\[object ([^\]]+)\]/.exec(toString.call(e));let o;if(n.length>1)o=n[1];else return toString.call(e);if(o=="Object")try{return"Object("+JSON.stringify(e)+")"}catch{return"Object"}return e instanceof Error?`${e.name}: ${e.message}
${e.stack}`:o}let N=0;const oe=typeof TextEncoder>"u"?(0,module.require)("util").TextEncoder:TextEncoder;let T=new oe("utf-8");const ae=typeof T.encodeInto=="function"?function(e,t){return T.encodeInto(e,t)}:function(e,t){const n=T.encode(e);return t.set(n),{read:e.length,written:n.length}};function $(e,t,n){if(n===void 0){const _=T.encode(e),p=t(_.length,1)>>>0;return S().subarray(p,p+_.length).set(_),N=_.length,p}let o=e.length,i=t(o,1)>>>0;const d=S();let c=0;for(;c<o;c++){const _=e.charCodeAt(c);if(_>127)break;d[i+c]=_}if(c!==o){c!==0&&(e=e.slice(c)),i=n(i,o,o=c+e.length*3,1)>>>0;const _=S().subarray(i+c,i+o),p=ae(e,_);c+=p.written}return N=c,i}let v=null;function I(){return(v===null||v.byteLength===0)&&(v=new Int32Array(l.memory.buffer)),v}function ie(e){const t=$(e,l.__wbindgen_malloc,l.__wbindgen_realloc),n=N,o=l.markdown_to_form_wasm_v2(t,n);return m(o)}function u(e,t){try{return e.apply(this,t)}catch(n){l.__wbindgen_exn_store(s(n))}}function se(e){m(e)}function ce(e){return typeof a(e)=="string"}function de(e,t){const n=new Error(F(e,t));return s(n)}function le(e){const t=a(e);return typeof t=="object"&&t!==null}function _e(e){return s(e)}function fe(e){return s(e)}function ue(e){const t=BigInt.asUintN(64,e);return s(t)}function be(e){const t=a(e);return s(t)}function ge(e,t){const n=F(e,t);return s(n)}function me(e,t,n){a(e)[m(t)]=m(n)}function we(e){const t=a(e).crypto;return s(t)}function pe(e){const t=a(e).process;return s(t)}function he(e){const t=a(e).versions;return s(t)}function xe(e){const t=a(e).node;return s(t)}function ye(e){const t=a(e).msCrypto;return s(t)}function je(){return u(function(){const e=module.require;return s(e)},arguments)}function ve(e){return typeof a(e)=="function"}function Se(){return u(function(e,t){a(e).randomFillSync(m(t))},arguments)}function Te(){return u(function(e,t){a(e).getRandomValues(a(t))},arguments)}function Ne(){const e=new Array;return s(e)}function Fe(e,t){const n=new Function(F(e,t));return s(n)}function Ee(){return s(new Map)}function Ae(){return u(function(e,t){const n=a(e).call(a(t));return s(n)},arguments)}function Ce(){const e=new Object;return s(e)}function Ue(){return u(function(){const e=self.self;return s(e)},arguments)}function Ie(){return u(function(){const e=window.window;return s(e)},arguments)}function Me(){return u(function(){const e=globalThis.globalThis;return s(e)},arguments)}function Oe(){return u(function(){const e=global.global;return s(e)},arguments)}function Re(e){return a(e)===void 0}function $e(e,t,n){a(e)[t>>>0]=m(n)}function Le(){return u(function(e,t,n){const o=a(e).call(a(t),a(n));return s(o)},arguments)}function Ve(e,t,n){const o=a(e).set(a(t),a(n));return s(o)}function ze(e){const t=a(e).buffer;return s(t)}function Be(e,t,n){const o=new Uint8Array(a(e),t>>>0,n>>>0);return s(o)}function We(e){const t=new Uint8Array(a(e));return s(t)}function qe(e,t,n){a(e).set(a(t),n>>>0)}function De(e){const t=new Uint8Array(e>>>0);return s(t)}function ke(e,t,n){const o=a(e).subarray(t>>>0,n>>>0);return s(o)}function He(e,t){const n=A(a(t)),o=$(n,l.__wbindgen_malloc,l.__wbindgen_realloc),i=N;I()[e/4+1]=i,I()[e/4+0]=o}function Je(e,t){throw new Error(F(e,t))}function Pe(){const e=l.memory;return s(e)}URL=globalThis.URL;const y=await ee({"./markdownparser_bg.js":{__wbindgen_object_drop_ref:se,__wbindgen_is_string:ce,__wbindgen_error_new:de,__wbindgen_is_object:le,__wbindgen_number_new:_e,__wbindgen_bigint_from_i64:fe,__wbindgen_bigint_from_u64:ue,__wbindgen_object_clone_ref:be,__wbindgen_string_new:ge,__wbg_set_20cbc34131e76824:me,__wbg_crypto_d05b68a3572bb8ca:we,__wbg_process_b02b3570280d0366:pe,__wbg_versions_c1cb42213cedf0f5:he,__wbg_node_43b1089f407e4ec2:xe,__wbg_msCrypto_10fc94afee92bd76:ye,__wbg_require_9a7e0f667ead4995:je,__wbindgen_is_function:ve,__wbg_randomFillSync_b70ccbdf4926a99d:Se,__wbg_getRandomValues_7e42b4fb8779dc6d:Te,__wbg_new_34c624469fb1d4fd:Ne,__wbg_newnoargs_5859b6d41c6fe9f7:Fe,__wbg_new_ad4df4628315a892:Ee,__wbg_call_a79f1973a4f07d5e:Ae,__wbg_new_87d841e70661f6e9:Ce,__wbg_self_086b5302bcafb962:Ue,__wbg_window_132fa5d7546f1de5:Ie,__wbg_globalThis_e5f801a37ad7d07b:Me,__wbg_global_f9a61fce4af6b7c1:Oe,__wbindgen_is_undefined:Re,__wbg_set_379b27f1d5f1bf9c:$e,__wbg_call_f6a2bc58c19c53c6:Le,__wbg_set_83e83bc2428e50ab:Ve,__wbg_buffer_5d1b598a01b41a42:ze,__wbg_newwithbyteoffsetandlength_d695c7957788f922:Be,__wbg_new_ace717933ad7117f:We,__wbg_set_74906aa30864df5a:qe,__wbg_newwithlength_728575f3bba9959b:De,__wbg_subarray_7f7a652672800851:ke,__wbindgen_debug_string:He,__wbindgen_throw:Je,__wbindgen_memory:Pe}},Z),Ge=y.memory,Ke=y.markdown_to_form_wasm_v2,Qe=y.__wbindgen_malloc,Xe=y.__wbindgen_realloc,Ye=y.__wbindgen_exn_store,Ze=Object.freeze(Object.defineProperty({__proto__:null,__wbindgen_exn_store:Ye,__wbindgen_malloc:Qe,__wbindgen_realloc:Xe,markdown_to_form_wasm_v2:Ke,memory:Ge},Symbol.toStringTag,{value:"Module"}));te(Ze);const et=`# User Registration Form

Text: First name [John Dog]

Text: Email Address [john@dog.com]

Textarea: This is nice [Enter your comments here]

checkbox: subscribe?
- [x] Subscribe to newsletter
- [ ] second value here

radio: my radio
- radio button
- another one
- third radio

Submit: submit`;function tt({formId:e}){const[t,n]=h.useState(et),[o,i]=h.useState(void 0);return h.useEffect(()=>{async function d(){if(e)try{const c=await k(`/forms/${e}`);c.content?n(c.content):C.error("Form content not found")}catch(c){console.error("Failed to load form:",c),C.error("Failed to load form")}}d()},[e]),h.useEffect(()=>{const d=ie(t);console.log(d),i(d)},[t]),r.jsx("div",{className:"flex flex-1 flex-col",children:r.jsx("div",{className:"@container/main mx-auto w-full max-w-screen-2xl flex flex-1 flex-col gap-2 px-4",children:r.jsxs("div",{className:"flex flex-col md:flex-row gap-4 py-4 md:gap-6 md:py-6",children:[r.jsx("div",{className:"flex-1 min-w-0 max-w-xl p-4",children:r.jsx(P,{formtext:t,setFormtext:n})}),r.jsx(U,{orientation:"horizontal",className:"md:hidden"}),r.jsx(U,{orientation:"vertical",className:"hidden md:block"}),r.jsx("div",{className:"flex-1 min-w-0 max-w-xl p-4",children:r.jsx(Y,{survey:o})})]})})})}function it(){const{formId:e}=L.useSearch();return r.jsx(tt,{formId:e})}export{it as component};
